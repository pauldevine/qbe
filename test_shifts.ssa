# Test shift operations
export function w $test_shifts(w %val) {
@start
	# Test immediate shifts
	%shl1 =w shl %val, 1       # Shift left by 1
	%shl4 =w shl %val, 4       # Shift left by 4
	%shr2 =w shr %val, 2       # Logical shift right by 2
	%sar3 =w sar %val, 3       # Arithmetic shift right by 3

	# Combine results
	%tmp1 =w add %shl1, %shl4
	%tmp2 =w add %shr2, %sar3
	%result =w add %tmp1, %tmp2
	ret %result
}

export function w $test_variable_shift(w %val, w %count) {
@start
	# Test variable shifts (count in register)
	%result =w shl %val, %count
	ret %result
}

export function w $multiply_by_8(w %n) {
@start
	# Multiply by 8 using left shift by 3
	%result =w shl %n, 3
	ret %result
}

export function w $divide_by_4(w %n) {
@start
	# Divide by 4 using arithmetic right shift by 2
	%result =w sar %n, 2
	ret %result
}
